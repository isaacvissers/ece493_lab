# Acceptance Test Suite — UC-08 Submit Paper Manuscript

## Scope
Validate that an **author** can submit a paper manuscript so it enters the CMS submission pipeline, and that CMS:
- restricts submission to authenticated authors,
- collects and validates required manuscript metadata,
- enforces file type and size constraints (PDF/Word/LaTeX; ≤ 7MB),
- stores the submission (metadata + file),
- confirms success and redirects appropriately,
including all UC-08 extensions (1a, 3a, 5a, 5b, 6a, 6b, 6c, 7a).

## Assumptions / Notes
- Required metadata includes at least: author names/affiliation/contact info, abstract, keywords, and main source.
- Accepted file types: PDF, Word, or LaTeX. If LaTeX requires a specific packaging format, adjust tests accordingly.
- A “Save draft” capability exists (as described in requirements); if not implemented, skip draft tests.

---

## Test Data
Create (or have available) the following files:
- **Valid PDF (<= 7MB)**: `paper-valid.pdf`
- **Valid Word (<= 7MB)**: `paper-valid.docx`
- **Valid LaTeX submission (<= 7MB)**: `paper-valid.tex` (or packaged format as implemented)
- **Invalid type**: `paper-invalid.txt` (or `.png`)
- **Oversize file (> 7MB)**: `paper-oversize.pdf`

Example metadata:
- Authors: “Alice Author; Bob Coauthor”
- Affiliation: “University of Alberta”
- Contact email: `alice.author@example.com`
- Abstract: non-empty text
- Keywords: “conference; management; cms”
- Main source: a non-empty value per your form (e.g., “Original research”)

---

# Test Cases

## AT-UC08-01 — Authenticated author can access submission form (Happy Path setup)
**Objective:** Ensure submission is available to logged-in authors.  
**Preconditions:** Author account exists; user is logged in as author.  
**Steps:**
1. Navigate to author home page.
2. Select **Submit Paper**.
**Expected Results:**
- System redirects to manuscript submission page.
- Submission form is displayed.

---

## AT-UC08-02 — Successful manuscript submission stores metadata + file and confirms success (Happy Path)
**Objective:** Validate end-to-end successful submission.  
**Preconditions:** Author logged in; `paper-valid.pdf` available.  
**Steps:**
1. Open submission form.
2. Enter all required metadata with valid values.
3. Upload `paper-valid.pdf` (<= 7MB).
4. Submit.
**Expected Results:**
- System validates required fields and formats.
- System validates file type and size.
- System stores manuscript metadata and file.
- Success message is displayed.
- User is redirected to home page.
**Postconditions:**
- Submission appears in author’s submissions list/status (if implemented).
- Stored record references the uploaded file.

---

## AT-UC08-03 — Unauthenticated user is redirected to login when attempting submission (Extension 1a)
**Objective:** Ensure authentication is required for submission.  
**Preconditions:** User is logged out (or session expired).  
**Steps:**
1. Attempt to access **Submit Paper** from public context or direct URL.
**Expected Results:**
- System redirects to login page.
- After successful login, user is returned to submission page (or can navigate there).
- No submission is created until user submits valid form.

---

## AT-UC08-04 — Save draft stores partial progress (Extension 3a)
**Objective:** Validate draft saving behavior.  
**Preconditions:** Author logged in; draft feature enabled.  
**Steps:**
1. Open submission form.
2. Fill in some (not necessarily all) fields; optionally upload a valid file.
3. Click **Save**.
**Expected Results:**
- System validates entered data (and file if present) to the extent required for saving.
- Draft is saved and confirmation is shown.
- Draft can be reopened later with saved values present.

---

## AT-UC08-05 — Missing required fields blocks submission (Extension 5a)
**Objective:** Ensure blanks are rejected.  
**Preconditions:** Author logged in; `paper-valid.pdf` available.  
**Steps:**
1. Open submission form.
2. Leave at least one required field blank (e.g., abstract).
3. Upload `paper-valid.pdf`.
4. Submit.
**Expected Results:**
- Submission is rejected.
- Error message identifies missing required fields.
- No submission is recorded as “submitted” in DB.

---

## AT-UC08-06 — Invalid field content blocks submission (Extension 5b)
**Objective:** Ensure invalid formats are rejected (e.g., bad email).  
**Preconditions:** Author logged in; `paper-valid.pdf` available.  
**Steps:**
1. Enter required metadata, but set contact email to an invalid value (e.g., `alice.author@`).
2. Upload `paper-valid.pdf`.
3. Submit.
**Expected Results:**
- Submission is rejected.
- Error message identifies invalid field(s).
- No submitted record is created.

---

## AT-UC08-07 — Invalid file type blocks submission (Extension 6a)
**Objective:** Enforce allowed file types only.  
**Preconditions:** Author logged in; `paper-invalid.txt` available.  
**Steps:**
1. Complete required metadata with valid values.
2. Upload `paper-invalid.txt`.
3. Submit.
**Expected Results:**
- Submission is rejected.
- Error message lists allowed file types (PDF, Word, LaTeX).
- No submitted record is created.

---

## AT-UC08-08 — Oversize file blocks submission (Extension 6b)
**Objective:** Enforce max file size (<= 7MB).  
**Preconditions:** Author logged in; `paper-oversize.pdf` available (> 7MB).  
**Steps:**
1. Complete required metadata with valid values.
2. Upload `paper-oversize.pdf`.
3. Submit.
**Expected Results:**
- Submission is rejected.
- Error message indicates file exceeds size limit (7MB).
- No submitted record is created.

---

## AT-UC08-09 — File upload failure prevents submission and allows retry (Extension 6c)
**Objective:** Ensure upload errors are handled and do not create partial submissions.  
**Preconditions:** Author logged in; simulate network/server upload failure.  
**Steps:**
1. Complete required metadata with valid values.
2. Attempt to upload `paper-valid.pdf` and force upload failure.
3. Attempt to submit.
4. Retry upload successfully and submit again.
**Expected Results:**
- System reports upload failure and blocks submission until upload succeeds.
- After retry succeeds, submission completes normally.
- No duplicate/partial submissions are created from the failed upload attempt.

---

## AT-UC08-10 — Database/storage write failure does not mark manuscript as submitted (Extension 7a)
**Objective:** Ensure safe failure if persistence fails.  
**Preconditions:** Author logged in; simulate DB/storage write failure at save/submit time.  
**Steps:**
1. Complete valid metadata.
2. Upload `paper-valid.pdf`.
3. Submit.
**Expected Results:**
- System displays error indicating submission could not be recorded at this time.
- Failure is logged for administrator review (verify logs/monitoring event).
- Submission is not marked as submitted; author does not see it as successfully submitted.

---

## AT-UC08-11 — Submission supports accepted formats (PDF/Word/LaTeX)
**Objective:** Validate all supported formats are accepted (when compliant).  
**Preconditions:** Author logged in; valid metadata.  
**Steps:**
1. Submit with `paper-valid.pdf`.
2. Submit with `paper-valid.docx`.
3. Submit with `paper-valid.tex` (or packaged format).
**Expected Results:**
- Each compliant format is accepted.
- Each submission is recorded successfully with correct file association.

---

# Exit Criteria (Definition of Done for UC-08)
UC-08 is accepted when:
- AT-UC08-02 passes (happy path), and
- Authentication gating works (AT-UC08-03), and
- Required-field and content validation works (AT-UC08-05, AT-UC08-06), and
- File rules are enforced (AT-UC08-07, AT-UC08-08), and
- Upload/storage failures fail safely without partial/duplicate submissions (AT-UC08-09, AT-UC08-10), and
- Accepted formats are supported (AT-UC08-11).
