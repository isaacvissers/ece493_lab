# Acceptance Test Suite — UC-01 Register an Account

## Scope
Validate that a **public user (guest)** can register by filling out a form, and that CMS correctly:
- navigates to the registration form,
- validates input (email + password),
- enforces email uniqueness,
- persists the new account,
- and redirects to login on success,
with correct error handling for alternate paths.

## Assumptions / Notes
- “Required information” includes **at minimum** email + password (other fields may exist; tests treat them as required if present).
- Password security rules are **not specified**; tests assume CMS implements a defined policy and returns a clear error when violated.
- A database failure should not create a partial account; failures should be logged server-side.

---

## Test Data
- **Valid new email**: `new.user+uc01@example.com` (not already in DB)
- **Existing email**: `existing.user@example.com` (pre-seeded in DB)
- **Invalid email formats**: `nouserdomain.com`, `user@`, `@domain.com`
- **Valid password**: `ValidPassw0rd!` (adjust if your policy differs)
- **Invalid passwords** (examples; pick ones that violate your policy):
  - Too short: `Ab1!`
  - Missing symbol: `ValidPassw0rd`
  - Missing number: `ValidPassword!`

---

# Test Cases

## AT-UC01-01 — Registration page is reachable from public context
**Objective:** Confirm a public user can start registration.  
**Preconditions:** User is logged out.  
**Steps:**
1. Navigate to CMS homepage.
2. Click **Register**.  
**Expected Results:**
- System redirects to the registration page.
- Registration form is displayed.

---

## AT-UC01-02 — Successful registration creates account and redirects to login (Happy Path)
**Objective:** Validate main success scenario end-to-end.  
**Preconditions:** `new.user+uc01@example.com` does not exist in DB; user logged out.  
**Steps:**
1. Open registration form.
2. Enter valid required user info (at least valid email + valid password).
3. Submit the form.  
**Expected Results:**
- System validates fields successfully.
- System confirms email uniqueness.
- System creates and stores the account in DB.
- User sees a success confirmation.
- User is redirected to the login page.

**Postconditions (DB/State):**
- Account exists for `new.user+uc01@example.com`.
- No duplicate accounts created.

---

## AT-UC01-03 — Invalid email format blocks registration (Extension 5a)
**Objective:** Validate email format validation.  
**Preconditions:** User logged out.  
**Steps:**
1. Open registration form.
2. Enter invalid email (e.g., `user@`).
3. Enter a valid password.
4. Submit.  
**Expected Results:**
- Registration fails.
- Error message indicates invalid email field.
- User remains on registration page (or returned to it).
- No account created in DB for that email.

---

## AT-UC01-04 — Correcting invalid email allows registration to continue (Extension 5a continuation)
**Objective:** Confirm user can recover after email error.  
**Preconditions:** Same session as AT-UC01-03 (or repeat).  
**Steps:**
1. Correct email to `new.user+uc01@example.com`.
2. Submit again.  
**Expected Results:**
- Email error disappears.
- If password and other fields are valid and email is unique, registration succeeds and redirects to login.
- Account stored in DB.

---

## AT-UC01-05 — Password policy violation blocks registration (Extension 5b)
**Objective:** Validate password security standards enforcement.  
**Preconditions:** User logged out; email is valid and unique.  
**Steps:**
1. Open registration form.
2. Enter valid unique email `new.user+uc01@example.com`.
3. Enter invalid password (one that violates policy).
4. Submit.  
**Expected Results:**
- Registration fails.
- Error message indicates password is invalid / doesn’t meet security standards.
- No account created in DB.

---

## AT-UC01-06 — Correcting invalid password allows registration to continue (Extension 5b continuation)
**Objective:** Confirm user can recover after password error.  
**Preconditions:** Same session as AT-UC01-05 (or repeat).  
**Steps:**
1. Replace password with a valid password.
2. Submit again.  
**Expected Results:**
- Password error disappears.
- If email is unique and other fields valid, registration succeeds and redirects to login.
- Account stored in DB.

---

## AT-UC01-07 — Duplicate email blocks registration (Extension 6a)
**Objective:** Validate email uniqueness rule.  
**Preconditions:** `existing.user@example.com` exists in DB; user logged out.  
**Steps:**
1. Open registration form.
2. Enter `existing.user@example.com`.
3. Enter valid password.
4. Submit.  
**Expected Results:**
- Registration fails.
- Error message indicates email is already registered/in use.
- No new account created (no duplicates).
- User remains on registration page (or returned to it).

---

## AT-UC01-08 — Changing duplicate email to unique email allows registration (Extension 6a continuation)
**Objective:** Confirm recovery after duplicate email.  
**Preconditions:** Same session as AT-UC01-07 (or repeat).  
**Steps:**
1. Replace email with `new.user+uc01@example.com`.
2. Submit again.  
**Expected Results:**
- Duplicate email error clears.
- Registration succeeds and redirects to login.
- Account stored in DB.

---

## AT-UC01-09 — Database error during persistence prevents account creation (Extension 7a)
**Objective:** Validate behavior when DB write fails.  
**Preconditions:** User logged out; system configured to simulate DB failure on create (e.g., DB down / mocked failure).  
**Steps:**
1. Open registration form.
2. Enter valid unique email and valid password.
3. Submit.  
**Expected Results:**
- System displays error indicating registration could not be completed.
- User remains unregistered (no redirect to login as “success”).
- No account created in DB (verify absence).
- Failure is logged for administrator review (verify logs/monitoring event exists).

---

## AT-UC01-10 — No partial account created on DB failure (Extension 7a integrity check)
**Objective:** Ensure transactional integrity.  
**Preconditions:** Same as AT-UC01-09.  
**Steps:**
1. After failure, restore DB.
2. Attempt registration again with the same email.  
**Expected Results:**
- The email is still considered unused (i.e., previous attempt did not partially create it).
- Registration succeeds normally after DB is restored.

---

# Additional Practical Acceptance Tests (Recommended)

## AT-UC01-11 — Required field omissions are rejected
**Objective:** Ensure required fields cannot be blank.  
**Steps:**
1. Leave one required field blank (email or password).
2. Submit.  
**Expected Results:**
- Error message indicates missing required field(s).
- No account created.

---

## AT-UC01-12 — User remains logged out after registration and must log in explicitly
**Objective:** Confirm redirect-to-login behavior (not auto-login).  
**Steps:**
1. Complete successful registration.
2. Observe landing page.  
**Expected Results:**
- User is on login page and not already authenticated.

---

# Exit Criteria (Definition of Done for UC-01)
UC-01 is accepted when:
- AT-UC01-01 through AT-UC01-10 pass, and
- No test produces duplicate/partial accounts, and
- Error messages are clear and the user is not redirected to login on failure.
