# UC-34 Scenario Narratives — Receive Payment Confirmation (Ticket)

This document provides fully dressed scenario narratives for the **main success scenario** and **each alternative path (extension)** in **UC-34: Receive payment confirmation (ticket)**.

---

## Main Success Scenario Narrative (Happy Path)

An attendee registers for the conference and completes payment successfully. Once the payment is approved, the Conference Management System (CMS) records the transaction and updates the attendee’s registration status to **Paid/Confirmed**.

After confirming payment, the CMS generates a payment confirmation artifact such as a ticket or receipt. This confirmation includes essential information that proves registration, such as the conference name, the attendee’s name, the ticket type, the amount paid, the transaction reference number, and the date/time of purchase.

The system displays an on-screen confirmation page immediately after payment, showing a summary of the ticket/receipt and offering the attendee the ability to download or print the confirmation if supported. The CMS also stores the ticket/receipt in the attendee’s account so it can be accessed later.

Finally, the CMS sends a confirmation message to the attendee through email and/or an in-app notification. The attendee can open the confirmation right away or return later to the **My Registration / Tickets** area to retrieve the ticket whenever proof of registration is needed.

---

## Alternative Path Narrative — 1a: Payment Not Completed (Declined/Cancelled/Failed)

An attendee attempts to pay for a conference ticket, but the payment does not complete successfully. The transaction may be declined by the issuer, cancelled by the attendee, or fail due to a payment processing error.

Since payment is not completed, the CMS does not generate a ticket or receipt and does not mark the registration as confirmed. Instead, the system displays a payment failure message and keeps the registration status as unpaid or unconfirmed.

The attendee may retry payment using a different method or attempt again later, but no proof of registration is provided until payment succeeds.

---

## Alternative Path Narrative — 3a: Ticket/Receipt Generation Fails

The attendee completes payment successfully and the CMS records the payment, but an error occurs when the system attempts to generate the ticket or receipt. This might happen due to a template error, PDF rendering failure, or missing configuration.

The CMS informs the attendee that confirmation could not be generated at the moment or that it is pending. The system logs the error for administrators and may automatically retry generating the ticket later.

Even though the ticket generation fails, the attendee’s registration remains **Paid/Confirmed** because payment was recorded successfully. The attendee can return later to retrieve the ticket once generation is restored.

---

## Alternative Path Narrative — 5a: Storage/Database Failure After Payment Confirmation

The attendee completes payment and the CMS generates a ticket/receipt successfully, but the system fails when trying to store the ticket or link it to the attendee’s account due to a database/storage error.

The CMS displays an error message indicating that the confirmation could not be saved. The system logs and flags the issue so administrators can reconcile the payment and ticket status.

The payment record is not lost, and the attendee remains **Paid/Confirmed**. Once the storage issue is resolved, the ticket can be regenerated or re-linked so the attendee can retrieve proof of registration.

---

## Alternative Path Narrative — 6a: Notification Delivery Fails (Email/In-App)

The attendee completes payment successfully and the CMS generates and stores the ticket. The system then attempts to send a confirmation message via email or in-app notification.

Due to a notification service outage or delivery issue, the confirmation message is not delivered. The CMS logs the delivery failure and may retry later.

Even though the notification fails, the attendee’s ticket remains available in CMS under **My Registration / Tickets**. The attendee can still access proof of registration by logging in and viewing the stored confirmation.

---

## Alternative Path Narrative — 7a: Attendee Tries to Retrieve Ticket Without Authentication

An attendee tries to access their ticket through a direct link or by opening the ticket page without being logged into CMS.

The system detects that the ticket is protected and requires authentication. The CMS prompts the attendee to log in. After the attendee logs in successfully, the system returns them to the ticket page and displays the stored ticket/receipt.

The attendee can then view or download the confirmation as proof of registration.

---

## Alternative Path Narrative — 7b: Duplicate Confirmation Requests (Refresh/Retry)

After payment succeeds, the attendee refreshes the confirmation page or retries the confirmation action multiple times. Without safeguards, this could create duplicate tickets or duplicate records.

The CMS detects that a ticket/receipt already exists for the same transaction. Instead of generating duplicates, the system displays the existing confirmation artifact and ensures only one ticket is linked to the payment.

The attendee still receives proof of registration, but the system maintains consistent and clean records.

