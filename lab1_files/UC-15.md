# Use Case UC-15: Notify editor of assignment rule violations

**Goal in Context**: When an editor attempts to assign referees and an assignment rule is violated (e.g., reviewer workload limit, invalid email, duplicate assignment), the system notifies the editor so they can correct the issue and complete valid assignments.  
**Scope**: Conference Management System (CMS)  
**Level**: Subfunction  
**Primary Actor**: Editor (Registered User with Editor role)  
**Secondary Actors**: CMS Database; Notification/UI Messaging Component  
**Trigger**: The editor performs an assignment action that violates one or more assignment rules.

## Success End Condition
* The system detects assignment rule violations, clearly notifies the editor of the problem(s), and allows the editor to correct the inputs/choices and retry.

## Failed End Condition
* The system fails to inform the editor of a rule violation, provides unclear guidance, or allows invalid assignments to be created.

## Preconditions
* The editor is logged in and has editor permissions.
* The editor is attempting to assign referee(s) to an eligible paper.
* Assignment rules are defined/enforced (e.g., valid email format, no duplicates, reviewer workload limit of 5 papers).
* The system has a way to present errors/warnings to the editor (inline validation, banner, modal, etc.).

## Main Success Scenario
1. The editor opens an eligible paper and selects **Assign Referees**.
2. The editor enters one or more referee email addresses and confirms the assignment.
3. The system evaluates the assignment request against assignment rules (e.g., email validity, duplicates, workload limit).
4. The system detects one or more rule violations.
5. The system notifies the editor by displaying a clear message for each violation, indicating what must be corrected.
6. The system prevents creation of invalid assignments for the violating entries (and, if applicable, indicates which assignments were blocked vs accepted).
7. The editor corrects the input (e.g., changes email, removes duplicates, selects a different reviewer) and resubmits.
8. The system re-evaluates the request and, if all rules pass, proceeds with saving the valid assignments and shows confirmation.

## Extensions
* **4a**: Multiple rule violations occur in the same request  
    * **4a1**: The system reports all detected violations at once (or clearly highlights each offending field/entry).
    * **4a2**: The system prevents assignment until all blocking violations are corrected.
* **5a**: Notification UI component fails to render (no visible message)  
    * **5a1**: The system logs the UI notification failure.
    * **5a2**: The system provides an alternate form of feedback (e.g., field highlighting, error summary region, “Assignment failed” status).
    * **5a3**: The system still blocks invalid assignment creation.
* **3a**: Rules evaluation fails (cannot compute workload, DB lookup error)  
    * **3a1**: The system fails safely by blocking the assignment.
    * **3a2**: The system notifies the editor that assignment cannot be completed at this time.
    * **3a3**: The system logs the evaluation failure for administrator review.
* **6a**: Partial success is allowed (some assignments valid, some invalid)  
    * **6a1**: The system saves only valid assignments.
    * **6a2**: The system notifies the editor which entries were saved and which were blocked and why.
* **6b**: System uses all-or-nothing assignment behavior  
    * **6b1**: If any entry violates rules, the system saves none of the assignments.
    * **6b2**: The system notifies the editor of all violations so they can correct and retry.

## Related Information
* **Priority**: High  
* **Frequency**: Medium (during assignment activities)  
* **Open Issues**:  
  * Exact list of “assignment rules” and whether all are blocking vs warning is not fully specified.  
  * Whether the system should use partial-apply or all-or-nothing behavior is not specified.  
  * Whether notifications should also be sent via email or only in-app is not specified.
