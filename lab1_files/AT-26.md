# Acceptance Test Suite — UC-26 Generate Conference Schedule (Time/Rooms) for Accepted Papers

## Scope
Validate that an administrator can generate a schedule that assigns **time slots and rooms** to accepted papers, and that CMS:
- requires valid scheduling configuration inputs,
- schedules each accepted paper exactly once when capacity permits,
- prevents conflicts and duplicate placements,
- handles insufficient capacity and missing metadata gracefully,
- saves the generated schedule as a draft and supports confirmation/publishing,
- handles authorization and system failures safely.

Covers UC-26 extensions (6a, 7a, 7b, 4a, 7c, 8a, 10a, 2a).

## Assumptions / Notes
- Scheduling algorithm is unspecified; tests focus on outcomes (valid assignments, capacity checks, no conflicts) rather than the exact optimization.
- If the system supports partial schedules, unscheduled items must be clearly flagged.
- If publication is out of scope, treat publish-related tests as optional.

---

## Test Data
- **Administrator (authorized)**: `admin1@example.com`
- **User (unauthorized)**: `userX@example.com`
- **Conference window**: Day 1 09:00–12:00, Day 1 13:00–17:00 (example)
- **Rooms**: `Room A`, `Room B`
- **Slot duration**: 30 minutes (example)
- **Accepted papers**:
  - Capacity-fit set: 10 accepted papers (should fit depending on slots/rooms)
  - Over-capacity set: 30 accepted papers (should exceed)
  - Missing-metadata set: some accepted papers missing track/length (simulate)
- Failure simulations:
  - DB write failure
  - Notification/publish failure (optional)

---

# Test Cases

## AT-UC26-01 — With valid inputs and sufficient capacity, schedule is generated and saved as draft (Happy Path)
**Objective:** Confirm successful schedule generation.  
**Preconditions:** Admin logged in; rooms, dates/times, slot duration configured; accepted papers fit capacity.  
**Steps:**
1. Navigate to **Scheduling**.
2. Confirm/enter conference dates/times, rooms, slot duration.
3. Click **Generate Schedule**.
**Expected Results:**
- System generates assignments for all accepted papers.
- Each accepted paper appears exactly once in the schedule.
- No room-time slot is double-booked.
- Schedule is saved as **Draft** and displayed to admin.

---

## AT-UC26-02 — Generated schedule shows time + room for every scheduled paper
**Objective:** Ensure schedule output is complete and readable.  
**Preconditions:** AT-UC26-01 completed.  
**Steps:**
1. Review schedule view.
2. Select multiple scheduled papers.
**Expected Results:**
- Each scheduled paper includes a room and a time slot (and date if multi-day).
- Schedule view supports admin review (e.g., by room/time list).

---

## AT-UC26-03 — No accepted papers: system warns and produces empty schedule or stops (Extension 6a)
**Objective:** Validate behavior when nothing to schedule.  
**Preconditions:** No accepted papers exist for conference.  
**Steps:**
1. Admin clicks **Generate Schedule**.
**Expected Results:**
- System informs admin that there are no accepted papers.
- Either:
  - empty draft schedule is created, OR
  - generation is aborted with no schedule created (per design).
- No errors/crashes.

---

## AT-UC26-04 — Insufficient capacity: system reports shortfall and flags unscheduled papers or blocks generation (Extension 7a)
**Objective:** Ensure capacity constraints are enforced.  
**Preconditions:** Accepted papers exceed available slots; valid scheduling inputs exist.  
**Steps:**
1. Click **Generate Schedule** with over-capacity set.
**Expected Results:**
- System detects insufficient slots/rooms.
- System reports capacity shortfall (e.g., N papers unscheduled).
- System either:
  - generates partial draft with unscheduled papers clearly flagged, OR
  - blocks generation until capacity increased (per policy).
- No silent dropping of papers.

---

## AT-UC26-05 — Conflict prevention: no duplicate placements and no double-booked room-time slots (Extension 7b)
**Objective:** Validate schedule integrity constraints.  
**Preconditions:** Any generated schedule.  
**Steps:**
1. Generate schedule.
2. Inspect output for conflicts:
   - same room + same time assigned to multiple papers,
   - same paper assigned to multiple slots.
**Expected Results:**
- No room-time slot contains more than one paper.
- No paper appears more than once.
- If conflict arises during generation, system flags conflict and does not finalize an invalid schedule.

---

## AT-UC26-06 — Missing/invalid scheduling inputs block generation with actionable feedback (Extension 4a)
**Objective:** Validate input validation.  
**Preconditions:** Remove required inputs (e.g., no rooms configured or invalid slot duration).  
**Steps:**
1. Click **Generate Schedule**.
**Expected Results:**
- System blocks generation.
- Missing/invalid inputs are highlighted with clear messages.
- After correcting inputs, generation can proceed.

---

## AT-UC26-07 — Missing paper metadata handled according to policy (Extension 7c)
**Objective:** Ensure papers needing metadata do not break scheduling.  
**Preconditions:** Some accepted papers missing required metadata.  
**Steps:**
1. Click **Generate Schedule**.
**Expected Results:**
- System identifies and flags papers with missing metadata.
- System either schedules using defaults (if allowed) OR excludes those papers and produces a partial schedule.
- Admin is shown which papers need fixes.

---

## AT-UC26-08 — Schedule save fails: system reports error and does not persist partial state (Extension 8a)
**Objective:** Ensure safe failure on persistence.  
**Preconditions:** Simulate DB write failure on schedule save.  
**Steps:**
1. Click **Generate Schedule**.
2. Force DB failure during draft save.
**Expected Results:**
- System shows error: schedule could not be saved.
- Failure is logged for admin review.
- No draft schedule is persisted as if successful.
- Admin can retry later.

---

## AT-UC26-09 — Unauthorized user cannot access schedule generation tools (Extension 2a)
**Objective:** Enforce access control for scheduling.  
**Preconditions:** UserX does not have admin scheduling permission.  
**Steps:**
1. Log in as userX.
2. Attempt to open Scheduling area or call Generate Schedule.
**Expected Results:**
- Access denied / authorization error.
- No schedule created/modified.
- Attempt logged (if logging exists).

---

## AT-UC26-10 — Publishing/notification failure does not roll back saved schedule (Extension 10a, optional)
**Objective:** Ensure publish is decoupled from persistence.  
**Preconditions:** Schedule saved successfully; publishing/notifications enabled; simulate notification failure.  
**Steps:**
1. Admin publishes schedule (or triggers notifications).
2. Force notification/publish failure.
3. Reload schedule view.
**Expected Results:**
- Schedule remains saved (draft/published state consistent per design).
- Failure is logged and can be retried.
- No loss of schedule data.

---

# Exit Criteria (Definition of Done for UC-26)
UC-26 is accepted when:
- A valid draft schedule can be generated and stored for accepted papers when capacity allows (AT-UC26-01, AT-UC26-02), and
- Capacity limits, conflicts, missing inputs, and missing metadata are handled safely and transparently (AT-UC26-04 to AT-UC26-07), and
- Authorization and persistence failures are handled safely (AT-UC26-08, AT-UC26-09), and
- Optional publish/notification failures do not corrupt schedule state (AT-UC26-10, if applicable).
