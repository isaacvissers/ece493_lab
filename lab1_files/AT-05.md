# Acceptance Test Suite — UC-05 Log in to CMS

## Scope
Validate that a **registered user** can log in using a username and password, and that CMS:
- prompts for credentials,
- authenticates by matching stored credentials,
- redirects the user to their home page on success,
- blocks access and shows appropriate errors on failure,
including all UC-05 extensions (3a, 5a, 5b, 5c).

## Assumptions / Notes
- The SRS mentions “username and password,” but registration emphasizes email. These tests treat “username” as the login identifier (which may be an email).
- Authentication should not grant access when required fields are missing, credentials are invalid, or the database is unavailable.
- Session management specifics (timeouts, MFA, lockout) are not defined; not tested unless implemented.

---

## Test Data
Pre-seed the CMS database with at least one valid account:

- **Existing user identifier (username/email)**: `login.user@example.com`
- **Correct password**: `CorrectPassw0rd!`
- **Incorrect password**: `WrongPassw0rd!`
- **Non-existent username**: `missing.user@example.com`

---

# Test Cases

## AT-UC05-01 — Login page prompts for username and password
**Objective:** Confirm the user can initiate login and is prompted for credentials.  
**Preconditions:** User is logged out.  
**Steps:**
1. Navigate to CMS.
2. Select **Log In**.
**Expected Results:**
- Login page/form is displayed.
- Username (or email) field is visible.
- Password field is visible.
- Submit/Login action is available.

---

## AT-UC05-02 — Successful login authenticates and redirects to user home page (Happy Path)
**Objective:** Validate successful authentication flow.  
**Preconditions:** `login.user@example.com` exists; user is logged out.  
**Steps:**
1. Open login form.
2. Enter username `login.user@example.com`.
3. Enter password `CorrectPassw0rd!`.
4. Submit.
**Expected Results:**
- System validates credentials against the database.
- User is authenticated successfully.
- User is redirected to their home page/dashboard.
- Protected features become accessible.

---

## AT-UC05-03 — Blank username blocks login (Extension 3a)
**Objective:** Ensure missing username is rejected.  
**Preconditions:** User is logged out.  
**Steps:**
1. Open login form.
2. Leave username blank.
3. Enter any password.
4. Submit.
**Expected Results:**
- Login is rejected.
- Error message indicates username is required (or required fields missing).
- User remains on login page and unauthenticated.

---

## AT-UC05-04 — Blank password blocks login (Extension 3a)
**Objective:** Ensure missing password is rejected.  
**Preconditions:** User is logged out.  
**Steps:**
1. Open login form.
2. Enter username `login.user@example.com`.
3. Leave password blank.
4. Submit.
**Expected Results:**
- Login is rejected.
- Error message indicates password is required (or required fields missing).
- User remains on login page and unauthenticated.

---

## AT-UC05-05 — Both fields blank blocks login (Extension 3a)
**Objective:** Ensure both missing fields are rejected.  
**Preconditions:** User is logged out.  
**Steps:**
1. Open login form.
2. Leave username and password blank.
3. Submit.
**Expected Results:**
- Login is rejected.
- Error message indicates required fields are missing.
- User remains unauthenticated.

---

## AT-UC05-06 — Non-existent username is rejected (Extension 5a)
**Objective:** Ensure unknown usernames do not authenticate.  
**Preconditions:** `missing.user@example.com` does not exist; user is logged out.  
**Steps:**
1. Open login form.
2. Enter username `missing.user@example.com`.
3. Enter any password.
4. Submit.
**Expected Results:**
- Login is rejected.
- Error message indicates invalid credentials (avoid revealing whether username exists, if applicable).
- User remains unauthenticated.
- No redirect to user home page.

---

## AT-UC05-07 — Incorrect password is rejected (Extension 5b)
**Objective:** Ensure password mismatch does not authenticate.  
**Preconditions:** `login.user@example.com` exists; user is logged out.  
**Steps:**
1. Open login form.
2. Enter username `login.user@example.com`.
3. Enter password `WrongPassw0rd!`.
4. Submit.
**Expected Results:**
- Login is rejected.
- Error message indicates invalid credentials.
- User remains unauthenticated.
- No redirect to user home page.

---

## AT-UC05-08 — Database lookup failure prevents login (Extension 5c)
**Objective:** Verify safe failure when database cannot be queried.  
**Preconditions:** Configure DB outage/timeout/mock failure; user is logged out.  
**Steps:**
1. Open login form.
2. Enter username `login.user@example.com`.
3. Enter password `CorrectPassw0rd!`.
4. Submit.
**Expected Results:**
- Login is rejected (no authentication granted).
- Error message indicates login cannot be completed at this time.
- System logs the failure for administrator review (verify logs/monitoring event).
- User remains on login page and unauthenticated.

---

## AT-UC05-09 — Successful login establishes authenticated session
**Objective:** Confirm access persists for authenticated user within the session.  
**Preconditions:** User successfully logged in (AT-UC05-02).  
**Steps:**
1. After login, navigate to a protected CMS feature/page.
2. Refresh the page.
**Expected Results:**
- User remains authenticated.
- Protected content remains accessible after refresh.
- No forced redirect back to login during normal session.

---

## AT-UC05-10 — Unauthenticated user cannot access protected pages
**Objective:** Confirm access control is enforced when not logged in.  
**Preconditions:** User is logged out.  
**Steps:**
1. Attempt to navigate directly to a protected page (e.g., dashboard/home).
**Expected Results:**
- Access is blocked.
- System redirects to login page (or shows access denied).
- No protected data is displayed.

---

# Exit Criteria (Definition of Done for UC-05)
UC-05 is accepted when:
- AT-UC05-01 through AT-UC05-08 pass, and
- Successful login redirects to home page and enables access (AT-UC05-02), and
- Authentication is not granted for missing/invalid credentials or DB failures, and
- Basic session establishment works (AT-UC05-09), and
- Protected routes are blocked for unauthenticated users (AT-UC05-10).
