# Use Case UC-33: Pay via credit card for a conference ticket

**Goal in Context**: An attendee pays via credit card so they can purchase a conference ticket.  
**Scope**: Conference Management System (CMS)  
**Level**: User Goal  
**Primary Actor**: Attendee  
**Secondary Actors**: Payment Gateway/Processor; Bank/Card Network; CMS Database; Email/Notification Service; Fraud/3‑D Secure Service (optional)  
**Trigger**: The attendee selects **Pay by Credit Card** during conference registration/checkout.

## Success End Condition
* Payment is authorized and captured (or authorized per policy), a ticket/registration is confirmed, and the attendee receives a receipt/confirmation.

## Failed End Condition
* Payment is not completed (declined, cancelled, timed out, or error). The attendee does not receive a confirmed ticket, and the system records no successful purchase (or records a clearly labeled pending/failed state).

## Preconditions
* The attendee is authenticated (or has an active checkout session, per policy).
* Conference registration/checkout is open.
* The attendee has selected a ticket/registration option with a non-zero fee (unless $0 tickets are allowed).
* The CMS is configured with a credit-card payment gateway.
* The system can create an order/payment intent and persist payment status.

## Main Success Scenario
1. The attendee logs into CMS and navigates to conference registration/checkout.
2. The attendee selects a ticket type and reviews the total amount due.
3. The attendee chooses **Pay via Credit Card**.
4. The system displays a secure payment form (cardholder name, card number, expiry, CVV, billing details as required).
5. The attendee enters valid credit card details and submits payment.
6. The system sends the payment request to the payment gateway for authorization (and capture, if immediate capture is used).
7. The payment gateway returns an approval response.
8. The system records the successful payment in the database and marks the order/registration as **Paid/Confirmed**.
9. The system displays a payment success confirmation and provides a receipt/transaction reference.
10. The system sends a confirmation email and/or in-app notification with purchase details and ticket/registration status.

## Extensions
* **5a**: Attendee cancels payment before submission  
    * **5a1**: The attendee exits the payment form or clicks cancel/back.
    * **5a2**: The system returns the attendee to checkout with no payment recorded.
* **6a**: Card details invalid (format/required fields)  
    * **6a1**: The system validates input and highlights invalid/missing fields.
    * **6a2**: The attendee corrects details and resubmits.
* **7a**: Payment declined by issuer (insufficient funds, invalid card, etc.)  
    * **7a1**: The gateway returns a decline response.
    * **7a2**: The system shows a decline message and does not confirm the ticket.
    * **7a3**: The attendee may retry with another card or payment method.
* **7b**: Payment gateway error or unavailable  
    * **7b1**: The gateway returns an error/timeout.
    * **7b2**: The system shows a temporary error message and suggests retrying later.
    * **7b3**: The system logs the incident; no confirmed purchase is recorded.
* **7c**: 3‑D Secure / additional authentication required (optional)  
    * **7c1**: The gateway requests step-up authentication.
    * **7c2**: The attendee completes authentication successfully.
    * **7c3**: Continue at step 7.
    * **7c4**: If authentication fails/cancelled, treat as payment failure and return to checkout.
* **8a**: Database write fails after payment approval  
    * **8a1**: The system shows an error indicating confirmation could not be completed.
    * **8a2**: The system logs the failure and flags the transaction for reconciliation.
    * **8a3**: The system does not display a confirmed ticket unless persistence succeeds (or marks as “Pending confirmation” if supported).
* **10a**: Confirmation notification fails after payment is recorded  
    * **10a1**: Payment/ticket remains confirmed.
    * **10a2**: The system logs notification failure and may retry later.
* **2a**: Total amount is $0 (free ticket)  
    * **2a1**: The system bypasses payment and confirms registration without charging.
    * **2a2**: The system marks registration as **Confirmed** and provides confirmation.

## Related Information
* **Priority**: High  
* **Frequency**: Medium–High (per attendee purchase)  
* **Open Issues**:  
  * Whether the system supports partial refunds, chargebacks, or payment retries is not specified.  
  * Whether payment is captured immediately or authorized then captured later is not specified.  
  * Whether the system supports saving cards or tokenized wallets is not specified.
