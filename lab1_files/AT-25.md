# Acceptance Test Suite — UC-25 Receive Editor’s Decision (Accept/Reject)

## Scope
Validate that an author can receive and view the editor’s final decision for their paper, and that CMS:
- delivers the decision via configured channels (in-app and/or email),
- displays the decision outcome clearly to authorized authors,
- enforces access control so non-authors cannot view decisions,
- handles notification delivery failures safely,
- handles missing/invalid author email for email delivery,
- handles authentication requirements for in-app viewing,
- supports staged (delayed) decision publication when configured,
- handles absence of decision notes.

Covers UC-25 extensions (5a, 3a, 6a, 6b, 2a, 7a).

## Assumptions / Notes
- “Receive” is interpreted as: decision is visible in the author’s CMS account, with optional email notification.
- Decision outcomes are **Accepted** or **Rejected** as recorded by editor (UC-24).
- Whether all co-authors or only the submitting author are notified is unspecified; tests can be adapted to your policy.

---

## Test Data
- **Submitting author**: `author1@example.com`
- **Co-author** (if supported): `author2@example.com`
- **Non-author user**: `authorX@example.com`
- **Editor**: `editor1@example.com`
- Papers:
  - `PAPER-120` owned by author1 (decision = Accepted)
  - `PAPER-121` owned by author1 (decision = Rejected)
- Configurations:
  - Notifications enabled (email and/or in-app)
  - Notifications disabled (in-app only)
  - Staged decision publication enabled (optional)
- Failure simulations:
  - Notification service failure (email/in-app)
  - Invalid/missing author email for email delivery

---

# Test Cases

## AT-UC25-01 — Author sees decision in “My Submissions” after editor records it (Happy Path)
**Objective:** Ensure in-app availability of decision for rightful author.  
**Preconditions:** Editor has saved final decision for `PAPER-120`; author1 account exists.  
**Steps:**
1. Log in as author1.
2. Navigate to **My Submissions**.
3. Open `PAPER-120` details.
**Expected Results:**
- Paper status shows **Accepted** (or decision field clearly shows Accept/Reject).
- Decision is visible and clearly labeled.
- Any available decision notes/comments are displayed (if provided).

---

## AT-UC25-02 — Email notification is sent when enabled and contains correct decision summary (If applicable)
**Objective:** Ensure email channel delivery works.  
**Preconditions:** Email notifications enabled; editor saved decision for `PAPER-121`.  
**Steps:**
1. Trigger decision publication/send event (save decision or release batch, depending on config).
2. Check inbox for author1 (or email sandbox/queue in test environment).
**Expected Results:**
- Email is delivered to author1.
- Email indicates `PAPER-121` decision is **Rejected** (or equivalent).
- Email includes correct paper identifier/title and does not leak other papers’ decisions.
- If email includes a link, it routes to the correct paper decision view in CMS.

---

## AT-UC25-03 — Notification service failure does not prevent author from viewing decision in-app (Extension 5a)
**Objective:** Ensure resilience to notification outages.  
**Preconditions:** Simulate notification service failure; decision saved for `PAPER-120`.  
**Steps:**
1. Trigger decision notification send.
2. Log in as author1 and open `PAPER-120` in **My Submissions**.
**Expected Results:**
- Author can still view the decision in CMS.
- Notification send failure is logged (admin/ops).
- No duplicate or corrupted state occurs.

---

## AT-UC25-04 — Missing/invalid author email prevents email send but decision remains accessible (Extension 3a)
**Objective:** Ensure fallback behavior when email delivery cannot occur.  
**Preconditions:** Email notifications enabled; author1 email missing/invalid (simulate); decision saved.  
**Steps:**
1. Trigger decision send.
2. Log in as author1 and open paper decision view.
**Expected Results:**
- Email delivery fails or is skipped due to invalid/missing email.
- System falls back to in-app visibility (if supported) and/or logs the issue.
- Author still sees the decision in CMS.

---

## AT-UC25-05 — Author must authenticate to view decision (Extension 6a)
**Objective:** Ensure in-app access requires login.  
**Preconditions:** Decision saved for `PAPER-120`; author not logged in (session expired).  
**Steps:**
1. Attempt to open `PAPER-120` decision view (direct URL or from notification link) while logged out.
2. Log in when prompted.
**Expected Results:**
- System prompts for authentication.
- After login, author is returned to the correct submission/decision view.
- Decision is displayed correctly.

---

## AT-UC25-06 — Non-author cannot view another author’s decision (Extension 6b)
**Objective:** Enforce access control.  
**Preconditions:** Decision saved for `PAPER-120`; user `authorX@example.com` is not associated with paper.  
**Steps:**
1. Log in as authorX.
2. Attempt to access `PAPER-120` decision view (direct URL or through search).
**Expected Results:**
- Access denied / authorization error shown.
- No decision details are revealed.
- Access attempt is logged (if logging exists).

---

## AT-UC25-07 — Staged decision publication: decision hidden until release time (Extension 2a, optional)
**Objective:** Ensure decisions can be staged and released later when configured.  
**Preconditions:** Staged publication enabled; editor saved decision for `PAPER-121` but not yet released.  
**Steps:**
1. Log in as author1 before release time and open `PAPER-121`.
2. Observe decision status.
3. Advance to release time (or trigger release), then refresh.
**Expected Results:**
- Before release: author sees “Pending decision” / “Not yet released” and cannot see accept/reject outcome.
- After release: author sees the final decision outcome and receives notifications per configuration.

---

## AT-UC25-08 — Decision notes absent: author still sees outcome (Extension 7a)
**Objective:** Ensure notes are optional.  
**Preconditions:** Editor saves a decision for `PAPER-120` without notes/comments.  
**Steps:**
1. Log in as author1.
2. Open `PAPER-120` decision view.
**Expected Results:**
- Outcome (Accepted/Rejected) is displayed clearly.
- Notes section is empty/omitted with no errors.
- UI does not show misleading placeholders as actual notes.

---

# Exit Criteria (Definition of Done for UC-25)
UC-25 is accepted when:
- Authors can view decisions for their own papers in CMS (AT-UC25-01), and
- Notifications work when enabled (AT-UC25-02) while failures do not block in-app access (AT-UC25-03), and
- Missing/invalid author email is handled safely (AT-UC25-04), and
- Authentication and access controls are enforced (AT-UC25-05, AT-UC25-06), and
- Optional staged release and optional notes behave correctly (AT-UC25-07, AT-UC25-08).
