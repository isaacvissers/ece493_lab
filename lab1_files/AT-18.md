# Acceptance Test Suite — UC-18 View Accepted Assigned Paper in Reviewer Account

## Scope
Validate that after a reviewer accepts a review invitation, the assigned paper appears in the reviewer’s CMS account and can be accessed for review. Ensure CMS:
- records acceptance and updates assignment status,
- shows accepted paper in reviewer dashboard/assigned list,
- restricts access when invitation not accepted,
- handles synchronization delays, missing acceptance records, manuscript unavailability, and DB retrieval failures.

Covers UC-18 extensions (3a, 6a, 6b, 8a, 8b, 5a).

## Assumptions / Notes
- Reviewer may need to log in to access dashboard/paper details.
- Paper visibility after acceptance may be immediate or slightly delayed; system should communicate delays clearly.
- “Access to manuscript” means reviewer can open/download the manuscript file and view relevant metadata.

---

## Test Data
- **Reviewer account**: `reviewer1@example.com`
- **Editor account**: `editor1@example.com`
- **Paper**: `PAPER-050` (eligible, manuscript available)
- **Invitation**: valid invitation issued to `reviewer1@example.com` for `PAPER-050`

Additional conditions:
- Paper with missing manuscript: `PAPER-051` (manuscript removed/corrupted)
- DB failure simulation for assignment retrieval

---

# Test Cases

## AT-UC18-01 — Accepted invitation results in paper visible in reviewer dashboard (Happy Path)
**Objective:** Confirm paper appears after acceptance.  
**Preconditions:** Valid invitation exists; reviewer can log in; `PAPER-050` available.  
**Steps:**
1. Reviewer clicks **Accept** on invitation (email or in-app).
2. Log in to CMS (if not already).
3. Navigate to **My Assigned Papers** / reviewer dashboard.
**Expected Results:**
- System records acceptance; assignment status becomes **Accepted**.
- `PAPER-050` appears in reviewer’s assigned papers list.
- Reviewer can click/open `PAPER-050` details.

---

## AT-UC18-02 — Reviewer can access manuscript from accepted paper
**Objective:** Confirm manuscript access is granted after acceptance.  
**Preconditions:** AT-UC18-01 completed.  
**Steps:**
1. From reviewer dashboard, open `PAPER-050`.
2. Attempt to view/download manuscript.
**Expected Results:**
- Paper details load successfully.
- Manuscript file is accessible to reviewer.
- No authorization error is shown.

---

## AT-UC18-03 — If not logged in, reviewer is prompted to authenticate (Extension 3a)
**Objective:** Ensure authentication gating works.  
**Preconditions:** Reviewer not logged in; accepted assignment exists.  
**Steps:**
1. Navigate directly to reviewer dashboard or attempt to open paper details.
**Expected Results:**
- System prompts for login.
- After login, reviewer lands on dashboard/paper page.
- Accepted paper appears and is accessible.

---

## AT-UC18-04 — Synchronization delay messaging and eventual visibility (Extension 6a)
**Objective:** Ensure user feedback exists if assignment takes time to appear.  
**Preconditions:** Configure/force delayed propagation of accepted assignment to dashboard list.  
**Steps:**
1. Reviewer accepts invitation.
2. Immediately open reviewer dashboard.
3. Refresh/reload as instructed.
**Expected Results:**
- If paper is not yet visible, system indicates updates may take time and suggests refresh.
- After delay/refresh, `PAPER-050` appears in list.
- No duplicate entries created.

---

## AT-UC18-05 — Acceptance not recorded: paper does not appear and reviewer is guided (Extension 6b)
**Objective:** Ensure clear handling if acceptance step failed.  
**Preconditions:** Simulate acceptance-record failure (invitation click does not persist accepted status).  
**Steps:**
1. Reviewer clicks **Accept** link.
2. Log in and open reviewer dashboard.
**Expected Results:**
- Paper does not appear in accepted assignments.
- System indicates no accepted assignment exists for this paper (or acceptance failed).
- Reviewer is instructed to retry acceptance or contact editor.
- System does not grant access to manuscript.

---

## AT-UC18-06 — Reviewer cannot access paper without accepting invitation (Extension 8a)
**Objective:** Enforce access control.  
**Preconditions:** Invitation exists but not accepted; reviewer logged in.  
**Steps:**
1. Attempt to access `PAPER-050` directly (URL or search) without accepting.
**Expected Results:**
- Access is denied.
- Message indicates invitation must be accepted to view paper/manuscript.
- Paper does not appear in “Accepted” list.

---

## AT-UC18-07 — Manuscript unavailable shows error and blocks access (Extension 8b)
**Objective:** Ensure graceful handling if manuscript missing/withdrawn.  
**Preconditions:** Reviewer has accepted invitation for `PAPER-051`; manuscript missing/unavailable.  
**Steps:**
1. Reviewer opens `PAPER-051` from assigned papers list.
2. Attempt to view/download manuscript.
**Expected Results:**
- System shows error indicating paper/manuscript unavailable.
- Manuscript access is blocked.
- Issue is logged and/or editor notified (if implemented).

---

## AT-UC18-08 — Assignment retrieval failure shows error and allows retry (Extension 5a)
**Objective:** Ensure safe failure when dashboard cannot load assignments.  
**Preconditions:** Simulate DB outage/timeout for assignment retrieval; reviewer logged in; accepted assignment exists.  
**Steps:**
1. Open reviewer dashboard.
**Expected Results:**
- System displays error indicating assignments cannot be loaded at this time.
- Failure is logged for administrator review.
- No stale/partial list is shown as “current” (unless clearly labeled).
- Reviewer can retry later; once DB is restored, the accepted paper appears.

---

# Exit Criteria (Definition of Done for UC-18)
UC-18 is accepted when:
- Accepted invitations reliably result in paper visibility in reviewer account (AT-UC18-01), and
- Reviewer can access manuscript only after acceptance (AT-UC18-02, AT-UC18-06), and
- Authentication, delay handling, and failure modes are handled safely and clearly (AT-UC18-03 to AT-UC18-05, AT-UC18-07, AT-UC18-08).
