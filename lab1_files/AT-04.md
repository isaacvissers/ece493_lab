# Acceptance Test Suite — UC-04 Redirect to Login After Registration

## Scope
Validate that after a **successful registration**, the CMS:
- displays a success confirmation,
- redirects the user to the **login page**,
- presents the login form,
- and does **not** auto-authenticate the user (unless explicitly intended).

Covers the main success scenario and extensions (4a, 4b).

## Assumptions / Notes
- UC-04 assumes the system requires **manual login** after registration (no auto-login).
- Registration success is defined as: valid inputs, account created, and stored in the database.
- Redirect timing may be immediate or after a short confirmation display; tests validate outcome rather than animation/timing details.

---

## Test Data
- **Valid new email**: `uc04.new.user@example.com` (not in DB)
- **Valid password**: `ValidPassw0rd!` (adjust to match your password policy)

---

# Test Cases

## AT-UC04-01 — Successful registration redirects to login page (Happy Path)
**Objective:** Verify redirect occurs after successful registration.  
**Preconditions:** User is logged out; `uc04.new.user@example.com` not in DB.  
**Steps:**
1. Navigate to the registration page.
2. Complete registration with valid data (email + password and any required fields).
3. Submit registration.
**Expected Results:**
- System displays a success confirmation message indicating registration is complete.
- System redirects the user to the login page.
- Login form is visible on the redirected page (username/email + password fields).

---

## AT-UC04-02 — Redirect destination is the correct login URL/route
**Objective:** Ensure redirect target is the login page (not homepage or dashboard).  
**Preconditions:** Same as AT-UC04-01.  
**Steps:**
1. Complete a successful registration.
2. Observe the URL/route after redirect.
**Expected Results:**
- URL/route matches the designated login route (e.g., `/login` or equivalent).
- Page title/header indicates login.
- No protected content is shown.

---

## AT-UC04-03 — User is not automatically logged in after registration (Extension 4b prevention)
**Objective:** Confirm the user must authenticate explicitly after registration.  
**Preconditions:** Same as AT-UC04-01; registration completes successfully.  
**Steps:**
1. Complete successful registration.
2. After redirect, attempt to access a protected page (e.g., user home/dashboard) without logging in.
**Expected Results:**
- User is treated as unauthenticated.
- System blocks access and redirects to login (or shows an access denied message).
- No authenticated session/cookie/token is set that grants access.

---

## AT-UC04-04 — If auto-login occurs, system logs user out and forces login (Extension 4b)
**Objective:** Validate the system’s recovery behavior if auto-login happens erroneously.  
**Preconditions:** Test environment configured or observed to auto-authenticate after registration (simulate session bug).  
**Steps:**
1. Complete successful registration.
2. Detect that user is automatically logged in (e.g., redirected to dashboard or sees authenticated UI).
**Expected Results:**
- System logs the user out (clears authenticated session state).
- System redirects user to login page.
- Login form is displayed and explicit authentication is required.

---

## AT-UC04-05 — Redirect failure shows error + provides manual login navigation (Extension 4a)
**Objective:** Verify graceful handling when redirect fails.  
**Preconditions:** Test environment configured to simulate redirect/navigation failure (e.g., login route temporarily unavailable or client routing failure).  
**Steps:**
1. Complete successful registration.
2. Trigger redirect to fail.
**Expected Results:**
- System displays an error message indicating the login page cannot be reached at this time.
- System provides a visible link/button to navigate to the login page manually.
- System does not drop the user into an undefined state.

---

## AT-UC04-06 — Redirect failure is logged (Extension 4a logging)
**Objective:** Confirm operational logging for redirect failures.  
**Preconditions:** Same as AT-UC04-05; access to logs/monitoring.  
**Steps:**
1. Trigger a redirect failure after successful registration.
2. Check server logs/monitoring/telemetry.
**Expected Results:**
- An error event is recorded that includes enough context to diagnose the redirect failure (timestamp, route, correlation ID/session, etc.).

---

## AT-UC04-07 — Success confirmation appears before redirect (if applicable)
**Objective:** Ensure the user receives confirmation that registration succeeded.  
**Preconditions:** Same as AT-UC04-01.  
**Steps:**
1. Complete successful registration.
2. Observe UI response immediately after submission.
**Expected Results:**
- A visible success confirmation is displayed (either on the registration page, a success page, or as a toast/banner) before or during redirect.
- Confirmation is not replaced by an error state.

---

# Exit Criteria (Definition of Done for UC-04)
UC-04 is accepted when:
- AT-UC04-01 through AT-UC04-03 pass, and
- Redirect failures are handled gracefully (AT-UC04-05), and
- Redirect failures are logged (AT-UC04-06), and
- The system does not allow unintended auto-authentication after registration (AT-UC04-03), or enforces recovery (AT-UC04-04) if such a condition occurs.
