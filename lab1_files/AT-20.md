# Acceptance Test Suite — UC-20 Access Review Form for Assigned Papers

## Scope
Validate that a reviewer can access the review form for papers assigned to them, and that CMS:
- lists eligible assigned papers,
- authorizes review form access only for accepted assignments,
- loads the review form (and any saved draft),
- handles authentication issues, empty assignment lists, unauthorized access, missing form configuration, DB failures, and closed review period constraints.

Covers UC-20 extensions (1a, 3a, 7a, 7b, 8a, 8b, 0a).

## Assumptions / Notes
- Review form fields/rubric are not specified; tests validate existence and load behavior rather than specific questions.
- If the system supports draft reviews, the form should prepopulate saved content.
- If deadlines exist, “closed” blocks editing/submission; optional read-only behavior may apply.

---

## Test Data
- **Reviewer account**: `reviewer1@example.com`
- **Another user (non-assigned)**: `reviewer2@example.com`
- **Assigned paper (accepted)**: `PAPER-070` assigned to reviewer1 with status Accepted
- **Assigned paper (pending)**: `PAPER-071` assigned to reviewer1 with status Pending
- **Unassigned paper**: `PAPER-072` not assigned to reviewer1
- **Review form configured**: enabled for conference/track
- **Missing form config scenario**: disable/remove review form config (simulation)
- **Closed review period scenario**: set review period closed (simulation)

---

# Test Cases

## AT-UC20-01 — Reviewer sees eligible assigned papers and can open review form (Happy Path)
**Objective:** Confirm standard access flow.  
**Preconditions:** Reviewer1 logged in; `PAPER-070` assignment accepted; review period open; form configured.  
**Steps:**
1. Navigate to **My Assigned Papers**.
2. Select `PAPER-070`.
3. Click **Open Review Form**.
**Expected Results:**
- `PAPER-070` appears in eligible list.
- System authorizes access.
- Review form loads successfully and is ready for input.

---

## AT-UC20-02 — Review form loads existing saved draft if present
**Objective:** Ensure draft prepopulation works (if supported).  
**Preconditions:** Reviewer1 has previously saved a draft review for `PAPER-070`.  
**Steps:**
1. Open review form for `PAPER-070`.
**Expected Results:**
- Form loads and pre-populates saved draft values.
- Reviewer can continue editing (if review period open).

---

## AT-UC20-03 — Session expired prompts login and returns to review form (Extension 1a)
**Objective:** Ensure authentication gating and return flow.  
**Preconditions:** Reviewer session expired; direct access to review form attempted.  
**Steps:**
1. Attempt to open review form for `PAPER-070`.
2. Log in when prompted.
**Expected Results:**
- System prompts for login.
- After login, reviewer returns to requested paper/review form.
- Form loads successfully.

---

## AT-UC20-04 — No eligible assigned papers shows informative message (Extension 3a)
**Objective:** Ensure correct behavior when nothing is available.  
**Preconditions:** Reviewer has no accepted/eligible assignments (or review period closed for all).  
**Steps:**
1. Navigate to **My Assigned Papers**.
**Expected Results:**
- System displays message: no assigned papers available for review.
- No broken/empty UI; navigation back is available.

---

## AT-UC20-05 — Access denied for paper not assigned to reviewer (Extension 7a)
**Objective:** Prevent unauthorized review form access.  
**Preconditions:** Reviewer1 logged in; `PAPER-072` not assigned to reviewer1.  
**Steps:**
1. Attempt to open review form for `PAPER-072` (via URL or search).
**Expected Results:**
- System denies access.
- Authorization error shown.
- Review form and paper review materials are not displayed.

---

## AT-UC20-06 — Pending/rejected assignment cannot access review form (Extension 7b)
**Objective:** Require acceptance before review.  
**Preconditions:** Reviewer1 has pending assignment for `PAPER-071`.  
**Steps:**
1. Attempt to open review form for `PAPER-071`.
**Expected Results:**
- System denies access.
- Message indicates reviewer must accept invitation before reviewing.
- No review form displayed.

---

## AT-UC20-07 — Missing/unavailable review form configuration shows error and logs issue (Extension 8a)
**Objective:** Ensure graceful failure if form not configured.  
**Preconditions:** Disable/remove review form configuration; Reviewer1 accepted assignment exists.  
**Steps:**
1. Attempt to open review form for `PAPER-070`.
**Expected Results:**
- System shows error: review form not available at this time.
- Failure is logged for administrator review.
- Reviewer cannot proceed until config restored.

---

## AT-UC20-08 — DB retrieval failure shows error and allows retry (Extension 8b)
**Objective:** Ensure safe handling of DB outages.  
**Preconditions:** Simulate DB outage/timeout for form/draft retrieval.  
**Steps:**
1. Attempt to open review form for `PAPER-070`.
**Expected Results:**
- System shows error: review form cannot be loaded at this time.
- Failure is logged.
- Reviewer can retry later; no partial/stale content shown as current (unless clearly labeled).

---

## AT-UC20-09 — Review period closed blocks editing/submission (Extension 0a)
**Objective:** Enforce deadline constraints.  
**Preconditions:** Review period is closed; Reviewer1 accepted assignment exists.  
**Steps:**
1. Attempt to open review form for `PAPER-070`.
**Expected Results:**
- System informs reviewer review period is closed.
- Editing/submission actions are disabled/blocked.
- If system supports read-only access, reviewer may view previously submitted review but cannot modify it.

---

# Exit Criteria (Definition of Done for UC-20)
UC-20 is accepted when:
- Reviewers can open review forms for accepted assigned papers (AT-UC20-01), and
- Drafts load if present (AT-UC20-02, if supported), and
- Access control prevents unauthorized or unaccepted access (AT-UC20-05, AT-UC20-06), and
- System handles auth, empty lists, missing config, DB failures, and deadline closure safely with clear messaging (AT-UC20-03, AT-UC20-04, AT-UC20-07 to AT-UC20-09).
